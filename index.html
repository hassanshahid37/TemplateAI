
<!-- index.html (excerpt) -->
<script>
/*
 YouTube Thumbnail Preview Fix
 - Aspect-ratio aware scaling
 - Contain-fit for 16:9 canvases
*/

function renderPreview(canvas, ctx, tpl) {
  const pw = ctx.canvas.width;
  const ph = ctx.canvas.height;

  const cw = canvas.w || canvas.width;
  const ch = canvas.h || canvas.height;

  const scale = Math.min(pw / cw, ph / ch);
  const ox = (pw - cw * scale) / 2;
  const oy = (ph - ch * scale) / 2;

  ctx.save();
  ctx.translate(ox, oy);
  ctx.scale(scale, scale);

  tpl.elements.forEach(el => drawElement(ctx, el));

  ctx.restore();
}
</script>
